class Solution(object):
    def countTrapezoids(self, points):
        """
        :type points: List[List[int]]
        :rtype: int
        """
        # pre-process
        L = len(points)

        from collections import defaultdict
        slopes_intercepts = defaultdict(lambda: defaultdict(int))
        middles_slopes = defaultdict(lambda: defaultdict(int))

        for idx in range(L):
            for idx2 in range(idx):
                x, y = points[idx]
                x2, y2 = points[idx2]
                dx, dy = x - x2, y - y2
                slope = (dy * 1.0) / dx if dx else float("inf")
                intercept = ((y * dx - x * dy) * 1.0) / dx if dx else x
                middle = "{}-{}".format(str(x + x2), str(y + y2))
                slopes_intercepts[slope][intercept] += 1
                middles_slopes[middle][slope] += 1

        # process
        ans = 0
        for intercept in slopes_intercepts.values():
            intercepts = 0
            for count in intercept.values():
                ans += intercepts * count
                intercepts += count

        # sub parallelogram counted twice
        for slope in middles_slopes.values():
            slopes = 0
            for count in slope.values():
                ans -= slopes * count
                slopes += count
        return ans


points = [[-3,2],[3,0],[2,3],[3,2],[2,-3]]
"""
points = [[0,0],[1,0],[0,1],[2,1]]
points = [[13,53],[-72,-80],[48,56],[52,78],[48,43],[-28,47],[-15,43],[39,78],[48,-35],[-41,83],[-22,63],[-15,-11],[17,43],[44,78]]
points = [[285,391],[-156,29],[-158,-5],[-153,-9],[-79,249],[-133,-378],[436,50],[298,336],[-318,-378],[-29,-266],[-435,278],[-381,313],[-29,399],[-96,110],[260,-48],[342,-128],[491,-295],[58,177],[-125,385],[266,-267],[-435,308],[-296,-89],[260,-128],[-29,-447],[-78,316],[132,135],[-245,84],[436,-183],[-155,-297],[-209,-153],[-46,339],[-155,-233],[132,391],[55,308],[-259,-150],[436,27],[55,198],[-291,-146],[101,119],[465,136],[260,39],[-37,-492],[57,-476],[-295,167],[262,-89],[373,-210],[-114,-267],[-209,356],[-153,-192],[373,302],[368,-194],[-268,105],[-322,-95],[-435,-445],[113,126],[206,399],[441,302],[-435,-424],[379,-457],[-377,-65],[-329,-199],[47,308],[368,336],[-442,-476],[-29,316],[-5,200],[254,-260],[294,-160],[260,125],[436,-113],[34,231],[-94,-303],[-322,355],[339,-101],[-133,-102],[24,-146],[296,203],[-435,-413],[260,146],[-454,-146],[-29,-283],[355,-492],[185,216],[-120,-57],[436,-431],[20,167],[-450,-48],[465,-267],[396,-101],[355,-465],[118,336],[-245,-427],[-148,-98],[-435,126],[-435,-301],[379,-334],[296,-460],[-337,39],[86,224],[-435,-27],[-64,-166],[57,-166],[-347,278],[-499,391],[-435,220],[-29,-71],[-29,167],[373,146],[-435,348],[-79,-255],[345,-492],[-262,-301],[-246,-457],[-435,302],[-330,-127],[379,278],[-435,-153],[-222,-427],[-159,-151],[454,9],[296,356],[-346,50],[-322,-57],[-154,302],[-435,142],[-125,356],[-90,167],[-337,308],[195,391],[-435,105],[-322,-27],[-347,-127],[-353,348],[-156,-160],[436,380],[-135,299],[495,167],[-262,-160],[-159,308],[380,-281],[-267,146],[-291,-303],[379,120],[-245,-153],[171,36],[260,-463],[-435,-110],[379,-24],[-6,-287],[-435,-220],[55,391],[-268,-308],[2,-57],[42,336],[273,360],[320,356],[-426,-297],[-260,391],[-381,-27],[-482,308],[436,-89],[407,287],[-156,36],[-304,-9],[-358,203],[-313,391],[236,304],[72,482],[-29,287],[-435,-78],[383,39]]
"""
# points = [[0,0],[1,0],[1,1],[0,1]]

solution = Solution()
print(solution.countTrapezoids(points))