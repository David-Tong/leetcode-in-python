class Solution(object):
    def minAreaFreeRect(self, points):
        """
        :type points: List[List[int]]
        :rtype: float
        """
        # pre-process
        EPS = 1e-7
        points = set(map(tuple, points))

        # process
        import itertools
        ans = float('inf')
        for p1, p2, p3 in itertools.permutations(points, 3):
            p4 = p2[0] + p3[0] - p1[0], p2[1] + p3[1] - p1[1]
            if p4 in points:
                v21 = complex(p2[0] - p1[0], p2[1] - p1[1])
                v31 = complex(p3[0] - p1[0], p3[1] - p1[1])
                if abs(v21.real * v31.real + v21.imag * v31.imag) < EPS:
                    ans = min(ans, abs(v21) * abs(v31))
        return ans if ans < float('inf') else 0


points = [[1,2],[2,1],[1,0],[0,1]]
points = [[0,1],[2,1],[1,1],[1,0],[2,0]]
points = [[0,3],[1,2],[3,1],[1,3],[2,1]]
points = [[3,1],[1,1],[0,1],[2,1],[3,3],[3,2],[0,2],[2,3]]
points = [[2,4],[4,2],[1,0],[3,4],[4,4],[2,2],[1,1],[3,0],[1,4],[0,3],[0,1],[2,1],[4,0]]
points = [[6995,28840],[35392,23219],[24403,4904],[20000,4275],[4396,21947],[33005,28840],[35708,20731],[35525,22500],[4520,22765],[14900,34875],[35525,17500],[11963,33516],[33516,28037],[20000,35725],[4365,21680],[5796,26747],[35096,24403],[13340,34245],[31500,30725],[30989,31248],[10939,32852],[8752,30989],[33875,27400],[35540,22405],[27315,6080],[26747,5796],[30725,31500],[34960,15155],[28840,33005],[7148,29061],[9275,31500],[18320,35635],[26660,5755],[8685,30920],[5125,25100],[19269,35708],[35604,18053],[33005,11160],[34245,26660],[17595,35540],[29435,7420],[21947,35604],[22500,4475],[34204,26747],[29435,32580],[10565,32580],[28037,33516],[22765,35480],[34204,13253],[22405,35540]]

solution = Solution()
print(solution.minAreaFreeRect(points))
