class Solution(object):
    def videoStitching(self, clips, time):
        """
        :type clips: List[List[int]]
        :type time: int
        :rtype: int
        """
        # pre-process
        L = len(clips)
        clips = sorted(clips, key=lambda clip: (clip[0], -1 * clip[1]))
        # print(clips)

        # process
        idx = 0
        if clips[idx][0] != 0:
            return -1
        end = clips[idx][1]
        ans = 1
        while idx < L and end < time:
            if clips[idx][0] > end:
                return -1
            idx2 = idx + 1
            extend = False
            while idx2 < L and clips[idx][0] <= clips[idx2][0] <= clips[idx][1]:
                if clips[idx2][1] > end:
                    end = clips[idx2][1]
                    extend = True
                idx2 += 1
            if extend:
                ans += 1
                idx = idx2 - 1
            else:
                idx += 1

        if end >= time:
            return ans
        else:
            return -1


clips = [[0,2],[4,6],[8,10],[1,9],[1,5],[5,9]]
time = 10

clips = [[0,1],[1,2]]
time = 5

clips = [[0,1],[6,8],[0,2],[5,6],[0,4],[0,3],[6,7],[1,3],[4,7],[1,4],[2,5],[2,6],[3,4],[4,5],[5,7],[6,9]]
time = 9

clips = [[8,10],[17,39],[18,19],[8,16],[13,35],[33,39],[11,19],[18,35]]
time = 20

clips = [[0,5],[1,6],[2,7],[3,8],[4,9],[5,10],[6,11],[7,12],[8,13],[9,14],[10,15],[11,16],[12,17],[13,18],[14,19],[15,20],[16,21],[17,22],[18,23],[19,24],[20,25],[21,26],[22,27],[23,28],[24,29],[25,30],[26,31],[27,32],[28,33],[29,34],[30,35],[31,36],[32,37],[33,38],[34,39],[35,40],[36,41],[37,42],[38,43],[39,44],[40,45],[41,46],[42,47],[43,48],[44,49],[45,50],[46,51],[47,52],[48,53],[49,54]]
time = 50

clips = [[41,82],[3,75],[15,90],[21,75],[49,91],[46,59],[6,88],[13,16],[22,92],[42,52],[29,45],[53,74],[72,91],[62,76],[34,47],[16,29],[80,93],[49,88],[2,9],[63,83],[8,36],[0,11],[38,42],[13,70],[39,48],[53,70],[26,100],[45,77],[12,93],[16,40],[64,66],[56,66],[2,52],[65,73],[36,50],[17,32],[10,84],[92,95],[81,90],[45,87],[7,11],[14,30],[57,85],[49,49],[56,100],[17,65],[76,96],[41,91],[44,93],[9,85],[18,86],[19,52],[7,16],[1,25],[8,68],[35,91],[7,66],[70,75],[23,60],[48,72],[8,9],[69,80],[45,77],[42,96],[47,92],[32,49],[72,81],[3,46],[29,92],[14,57],[39,66],[0,15],[49,77],[37,60],[24,77],[15,74],[36,64],[61,76],[10,96],[9,24],[23,55],[35,72],[11,26],[38,71],[44,89],[42,49],[49,52],[28,93],[12,61],[7,69],[42,82],[4,66],[4,58],[2,51],[1,44],[22,67],[6,53],[37,46],[5,65],[10,33]]
time = 80

clips = [[2,2],[0,0],[1,3]]
time = 1

solution = Solution()
print(solution.videoStitching(clips, time))